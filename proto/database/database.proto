syntax = "proto3";
package database;
option go_package = "sirius.database.v1;database1";

service Database {
    rpc CreateUser (CreateUserRequest) returns (CreateUserResponse);
    rpc CheckUser (CheckUserRequest) returns (CheckUserResponse);
    rpc CheckingBalanceSufficiency (CheckingBalanceSufficiencyRequest) returns (CheckingBalanceSufficiencyResponse);
    rpc RequestUserStatistic (RequestUserStatisticRequest) returns (RequestUserStatisticResponse);
    rpc RequestUserTransactionsHistory (RequestUserTransactionsHistoryRequest) returns (RequestUserTransactionsHistoryResponse);
    rpc AddFinishStatus (AddFinishStatusRequest) returns (AddFinishStatusResponse);
    rpc AddingUserPayment (AddingUserPaymentRequest) returns (AddingUserPaymentResponse);
    rpc WithdrawalUserPayment (WithdrawalUserPaymentRequest) returns (WithdrawalUserPaymentResponse);
}

message CreateUserRequest {
    int64 UserID = 1;
}

message CreateUserResponse {
    string Error = 1;
}

message CheckUserRequest {
    int64 UserID = 1;
}

message CheckUserResponse {
    bool Exists = 1;
    string Error = 2;
}

message CheckingBalanceSufficiencyRequest {
    int64 UserID = 1;
    int64 Amount = 2;
}

message CheckingBalanceSufficiencyResponse {
    bool Sufficiency = 1;
    string Error = 2;
}

message RequestUserStatisticRequest {
    int64 UserID = 1;
}

message RequestUserStatisticResponse {
    int64 Balance = 1;
    int64 WithdrawalBalance = 2;
    int64 NumderOfGames = 3;
    int64 NumderOfLosses = 4;
    string Error = 5;
}

message RequestUserTransactionsHistoryRequest {
    int64 UserID = 1;
    int64 StartDate = 2;
    int64 EndDate = 3;
}

message RequestUserTransactionsHistoryResponse {
    repeated Transfer Transfers = 1;
    string Error = 2;
}

message Transfer {
    string TransferID = 1;
    int64 Amount = 2;
    bool Accrualed = 3;
    int64 Date = 4;
    string Currency = 5;
}

message AddFinishStatusRequest {
    string GameID = 1;
    repeated int64 WinnersID = 2;
    int64 LoserID = 3;
    int64 TimeStart = 5;
    int64 TimeEnd = 6;
    bool ExtraEndGame = 7;
    bool PrivateGame = 8;
    int64 NumberOfPlayers = 9;
    int64 DeckSize = 10;
    bool SpeedMod = 11;
    bool ThrowMod = 12;
    bool PassingMod = 13;
    bool TricksMod = 14;
    int64 Stake = 15;
}

message AddFinishStatusResponse {
    string Error = 1;
}

message AddingUserPaymentRequest {
    string CharcherID = 1;
    int64 UserID = 2;
    int64 ChatID = 3;
    int64 MessageID = 4;
    string Currency = 5;
    int64 Amount = 6;
    string OrderID = 7;
    string Payload = 8;
    int64 Time = 9;
    bool BanStatus = 10;
}

message AddingUserPaymentResponse {
    string Error = 1;
}

message WithdrawalUserPaymentRequest {
    int64 UserID = 1;
    int64 Amount = 2;
}

message WithdrawalUserPaymentResponse {
    string Message = 1;
    string Error = 2;
}